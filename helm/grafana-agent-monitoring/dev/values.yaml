grafana-agent-metrics:
  enabled: true
  controller:
    type: deployment
    replicas: 1
  agent:
    mode: static
    securityContext:
      privileged: true
      runAsUser: 0
    extraArgs:
    - -config.expand-env=true
    envFrom:
    - secretRef:
        name: grafanaprom-secret
    resources:
      requests:
        cpu: 50m
        memory: 1300Mi
    configMap:
      create: true
      content: |
        metrics:
          wal_directory: /var/lib/grafana-agent/wal
          global:
            scrape_interval: 1m # 
            external_labels:
              cluster: dev
          configs:
          - name: default
            remote_write:
            - url: ${url}
              basic_auth:
                username: ${username}
                password: ${password}
              write_relabel_configs:
              # config to drop unused Kuma metrics
              - source_labels: ["__name__"]
                regex: "ALERTS_FOR_STATE|api_server_http_request_duration_seconds_sum|api_server_http_requests_inflight|api_server_http_response_size_bytes_bucket|api_server_http_response_size_bytes_count|api_server_http_response_size_bytes_sum|apiserver_request:availability30d|apiserver_request:burnrate3d|ca_manager_get_cert|ca_manager_get_cert_count|ca_manager_get_cert_sum|ca_manager_get_root_cert_chain|ca_manager_get_root_cert_chain_count|ca_manager_get_root_cert_chain_sum|cert_generation|cluster_verb_scope:apiserver_request_slo_duration_seconds_count:increase30d|cluster_verb_scope_le:apiserver_request_slo_duration_seconds_bucket:increase30d|code:apiserver_request_total:increase30d|code_verb:apiserver_request_total:increase30d|count:up1|dp_server_http_request_duration_seconds_count|dp_server_http_request_duration_seconds_sum|dp_server_http_requests_inflight|dp_server_http_response_size_bytes_bucket|dp_server_http_response_size_bytes_sum|envoy_cluster_assignment_stale|envoy_cluster_assignment_timeout_received|envoy_cluster_bind_errors|envoy_cluster_circuit_breakers_default_cx_open|envoy_cluster_circuit_breakers_default_cx_pool_open|envoy_cluster_circuit_breakers_default_rq_open|envoy_cluster_circuit_breakers_default_rq_pending_open|envoy_cluster_circuit_breakers_default_rq_retry_open|envoy_cluster_circuit_breakers_high_cx_open|envoy_cluster_circuit_breakers_high_cx_pool_open|envoy_cluster_circuit_breakers_high_rq_open|envoy_cluster_circuit_breakers_high_rq_pending_open|envoy_cluster_circuit_breakers_high_rq_retry_open|envoy_cluster_client_ssl_socket_factory_downstream_context_secrets_not_ready|envoy_cluster_client_ssl_socket_factory_ssl_context_update_by_sds|envoy_cluster_client_ssl_socket_factory_upstream_context_secrets_not_ready|envoy_cluster_default_total_match_count|envoy_cluster_external_upstream_rq|envoy_cluster_external_upstream_rq_completed|envoy_cluster_external_upstream_rq_time_bucket|envoy_cluster_external_upstream_rq_time_count|envoy_cluster_external_upstream_rq_time_sum|envoy_cluster_http1_dropped_headers_with_underscores|envoy_cluster_http1_metadata_not_supported_error|envoy_cluster_http1_requests_rejected_with_underscores_in_headers|envoy_cluster_http1_response_flood|envoy_cluster_http2_deferred_stream_close|envoy_cluster_http2_dropped_headers_with_underscores|envoy_cluster_http2_header_overflow|envoy_cluster_http2_headers_cb_no_stream|envoy_cluster_http2_inbound_empty_frames_flood|envoy_cluster_http2_inbound_priority_frames_flood|envoy_cluster_http2_inbound_window_update_frames_flood|envoy_cluster_http2_keepalive_timeout|envoy_cluster_http2_metadata_empty_frames|envoy_cluster_http2_outbound_control_flood|envoy_cluster_http2_outbound_flood|envoy_cluster_http2_pending_send_bytes|envoy_cluster_http2_requests_rejected_with_underscores_in_headers|envoy_cluster_http2_rx_messaging_error|envoy_cluster_http2_rx_reset|envoy_cluster_http2_stream_refused_errors|envoy_cluster_http2_streams_active|envoy_cluster_http2_trailers|envoy_cluster_http2_tx_flush_timeout|envoy_cluster_http2_tx_reset|envoy_cluster_init_fetch_timeout|envoy_cluster_internal_upstream_rq|envoy_cluster_internal_upstream_rq_completed|envoy_cluster_internal_upstream_rq_xx|envoy_cluster_lb_healthy_panic|envoy_cluster_lb_local_cluster_not_ok|envoy_cluster_lb_recalculate_zone_structures|envoy_cluster_lb_subsets_active|envoy_cluster_lb_subsets_created|envoy_cluster_lb_subsets_fallback|envoy_cluster_lb_subsets_fallback_panic|envoy_cluster_lb_subsets_removed|envoy_cluster_lb_subsets_selected|envoy_cluster_lb_zone_cluster_too_small|envoy_cluster_lb_zone_no_capacity_left|envoy_cluster_lb_zone_number_differs|envoy_cluster_lb_zone_routing_all_directly|envoy_cluster_lb_zone_routing_cross_zone|envoy_cluster_lb_zone_routing_sampled|envoy_cluster_manager_active_clusters|envoy_cluster_manager_cds_init_fetch_timeout|envoy_cluster_manager_cds_update_attempt|envoy_cluster_manager_cds_update_duration_bucket|envoy_cluster_manager_cds_update_duration_count|envoy_cluster_manager_cds_update_duration_sum|envoy_cluster_manager_cds_update_failure|envoy_cluster_manager_cds_update_rejected|envoy_cluster_manager_cds_update_success|envoy_cluster_manager_cds_update_time|envoy_cluster_manager_cds_version|envoy_cluster_manager_cds_version_text|envoy_cluster_manager_cluster_added|envoy_cluster_manager_cluster_modified|envoy_cluster_manager_cluster_removed|envoy_cluster_manager_cluster_updated|envoy_cluster_manager_cluster_updated_via_merge|envoy_cluster_manager_update_merge_cancelled|envoy_cluster_manager_update_out_of_merge_window|envoy_cluster_manager_warming_clusters|envoy_cluster_max_host_weight|envoy_cluster_membership_change|envoy_cluster_membership_degraded|envoy_cluster_membership_excluded|envoy_cluster_membership_healthy|envoy_cluster_original_dst_host_invalid|envoy_cluster_outlier_detection_ejections_consecutive_5xx|envoy_cluster_outlier_detection_ejections_detected_consecutive_5xx|envoy_cluster_outlier_detection_ejections_detected_consecutive_gateway_failure|envoy_cluster_outlier_detection_ejections_detected_consecutive_local_origin_failure|envoy_cluster_outlier_detection_ejections_detected_failure_percentage|envoy_cluster_outlier_detection_ejections_detected_local_origin_failure_percentage|envoy_cluster_outlier_detection_ejections_detected_local_origin_success_rate|envoy_cluster_outlier_detection_ejections_detected_success_rate|envoy_cluster_outlier_detection_ejections_enforced_consecutive_5xx|envoy_cluster_outlier_detection_ejections_enforced_consecutive_gateway_failure|envoy_cluster_outlier_detection_ejections_enforced_consecutive_local_origin_failure|envoy_cluster_outlier_detection_ejections_enforced_failure_percentage|envoy_cluster_outlier_detection_ejections_enforced_local_origin_failure_percentage|envoy_cluster_outlier_detection_ejections_enforced_local_origin_success_rate|envoy_cluster_outlier_detection_ejections_enforced_success_rate|envoy_cluster_outlier_detection_ejections_enforced_total|envoy_cluster_outlier_detection_ejections_overflow|envoy_cluster_outlier_detection_ejections_success_rate|envoy_cluster_outlier_detection_ejections_total|envoy_cluster_retry_or_shadow_abandoned|envoy_cluster_ssl_ciphers|envoy_cluster_ssl_connection_error|envoy_cluster_ssl_curves_X25519|envoy_cluster_ssl_fail_verify_cert_hash|envoy_cluster_ssl_fail_verify_error|envoy_cluster_ssl_fail_verify_no_cert|envoy_cluster_ssl_fail_verify_san|envoy_cluster_ssl_no_certificate|envoy_cluster_ssl_ocsp_staple_failed|envoy_cluster_ssl_ocsp_staple_omitted|envoy_cluster_ssl_ocsp_staple_requests|envoy_cluster_ssl_ocsp_staple_responses|envoy_cluster_ssl_session_reused|envoy_cluster_ssl_sigalgs_rsa_pss_rsae_sha256|envoy_cluster_ssl_versions_TLSv1_2|envoy_cluster_update_attempt|envoy_cluster_update_duration_bucket|envoy_cluster_update_duration_count|envoy_cluster_update_duration_sum|envoy_cluster_update_empty|envoy_cluster_update_failure|envoy_cluster_update_no_rebuild|envoy_cluster_update_rejected|envoy_cluster_update_success|envoy_cluster_update_time|envoy_cluster_upstream_cx_close_notify|envoy_cluster_upstream_cx_connect_attempts_exceeded|envoy_cluster_upstream_cx_connect_fail|envoy_cluster_upstream_cx_connect_ms_count|envoy_cluster_upstream_cx_connect_ms_sum|envoy_cluster_upstream_cx_connect_with_0_rtt|envoy_cluster_upstream_cx_destroy|envoy_cluster_upstream_cx_destroy_local|envoy_cluster_upstream_cx_destroy_remote|envoy_cluster_upstream_cx_destroy_with_active_rq|envoy_cluster_upstream_cx_http1_total|envoy_cluster_upstream_cx_http2_total|envoy_cluster_upstream_cx_http3_total|envoy_cluster_upstream_cx_idle_timeout|envoy_cluster_upstream_cx_length_ms_count|envoy_cluster_upstream_cx_length_ms_sum|envoy_cluster_upstream_cx_max_duration_reached|envoy_cluster_upstream_cx_max_requests|envoy_cluster_upstream_cx_none_healthy|envoy_cluster_upstream_cx_pool_overflow|envoy_cluster_upstream_cx_protocol_error|envoy_cluster_upstream_cx_rx_bytes_buffered|envoy_cluster_upstream_cx_total|envoy_cluster_upstream_cx_tx_bytes_buffered|envoy_cluster_upstream_flow_control_backed_up_total|envoy_cluster_upstream_flow_control_drained_total|envoy_cluster_upstream_flow_control_paused_reading_total|envoy_cluster_upstream_flow_control_resumed_reading_total|envoy_cluster_upstream_http3_broken|envoy_cluster_upstream_internal_redirect_failed_total|envoy_cluster_upstream_internal_redirect_succeeded_total|envoy_cluster_upstream_rq|envoy_cluster_upstream_rq_0rtt|envoy_cluster_upstream_rq_active|envoy_cluster_upstream_rq_cancelled|envoy_cluster_upstream_rq_completed|envoy_cluster_upstream_rq_maintenance_mode|envoy_cluster_upstream_rq_max_duration_reached|envoy_cluster_upstream_rq_pending_active|envoy_cluster_upstream_rq_pending_total|envoy_cluster_upstream_rq_per_try_idle_timeout|envoy_cluster_upstream_rq_per_try_timeout|envoy_cluster_upstream_rq_retry|envoy_cluster_upstream_rq_retry_backoff_exponential|envoy_cluster_upstream_rq_retry_backoff_ratelimited|envoy_cluster_upstream_rq_retry_limit_exceeded|envoy_cluster_upstream_rq_retry_success|envoy_cluster_upstream_rq_time_count|envoy_cluster_upstream_rq_time_sum|envoy_cluster_upstream_rq_xx|envoy_cluster_version|envoy_cluster_version_text|envoy_control_plane_pending_requests|envoy_control_plane_rate_limit_enforced|envoy_dns_cares_get_addr_failure|envoy_dns_cares_not_found|envoy_dns_cares_pending_resolutions|envoy_dns_cares_resolve_total|envoy_dns_cares_timeouts|envoy_dns_filter_kuma_dns_a_record_queries|envoy_dns_filter_kuma_dns_aaaa_record_queries|envoy_dns_filter_kuma_dns_cluster_a_record_answers|envoy_dns_filter_kuma_dns_cluster_aaaa_record_answers|envoy_dns_filter_kuma_dns_cluster_srv_record_answers|envoy_dns_filter_kuma_dns_cluster_unsupported_answers|envoy_dns_filter_kuma_dns_downstream_rx_bytes_bucket|envoy_dns_filter_kuma_dns_downstream_rx_bytes_count|envoy_dns_filter_kuma_dns_downstream_rx_bytes_sum|envoy_dns_filter_kuma_dns_downstream_rx_errors|envoy_dns_filter_kuma_dns_downstream_rx_invalid_queries|envoy_dns_filter_kuma_dns_downstream_rx_queries|envoy_dns_filter_kuma_dns_downstream_rx_query_latency_bucket|envoy_dns_filter_kuma_dns_downstream_rx_query_latency_count|envoy_dns_filter_kuma_dns_downstream_rx_query_latency_sum|envoy_dns_filter_kuma_dns_downstream_tx_bytes_bucket|envoy_dns_filter_kuma_dns_downstream_tx_bytes_count|envoy_dns_filter_kuma_dns_downstream_tx_bytes_sum|envoy_dns_filter_kuma_dns_downstream_tx_responses|envoy_dns_filter_kuma_dns_external_a_record_answers|envoy_dns_filter_kuma_dns_external_a_record_queries|envoy_dns_filter_kuma_dns_external_aaaa_record_answers|envoy_dns_filter_kuma_dns_external_aaaa_record_queries|envoy_dns_filter_kuma_dns_external_unsupported_queries|envoy_dns_filter_kuma_dns_externally_resolved_queries|envoy_dns_filter_kuma_dns_known_domain_queries|envoy_dns_filter_kuma_dns_local_a_record_answers|envoy_dns_filter_kuma_dns_local_aaaa_record_answers|envoy_dns_filter_kuma_dns_local_srv_record_answers|envoy_dns_filter_kuma_dns_local_unsupported_answers|envoy_dns_filter_kuma_dns_queries_with_additional_rrs|envoy_dns_filter_kuma_dns_queries_with_ans_or_authority_rrs|envoy_dns_filter_kuma_dns_query_buffer_underflow|envoy_dns_filter_kuma_dns_query_parsing_failure|envoy_dns_filter_kuma_dns_record_name_overflow|envoy_dns_filter_kuma_dns_srv_record_queries|envoy_dns_filter_kuma_dns_unanswered_queries|envoy_dns_filter_kuma_dns_unsupported_queries|envoy_envoy_overload_actions_reset_high_memory_stream_count|envoy_filesystem_flushed_by_timer|envoy_filesystem_reopen_failed|envoy_filesystem_write_buffered|envoy_filesystem_write_completed|envoy_filesystem_write_failed|envoy_filesystem_write_total_buffered|envoy_http1_dropped_headers_with_underscores|envoy_http1_metadata_not_supported_error|envoy_http1_requests_rejected_with_underscores_in_headers|envoy_http1_response_flood|envoy_http_downstream_cx_active|envoy_http_downstream_cx_delayed_close_timeout|envoy_http_downstream_cx_destroy|envoy_http_downstream_cx_destroy_active_rq|envoy_http_downstream_cx_destroy_local|envoy_http_downstream_cx_destroy_local_active_rq|envoy_http_downstream_cx_destroy_remote|envoy_http_downstream_cx_destroy_remote_active_rq|envoy_http_downstream_cx_drain_close|envoy_http_downstream_cx_http1_active|envoy_http_downstream_cx_http1_total|envoy_http_downstream_cx_http2_active|envoy_http_downstream_cx_http2_total|envoy_http_downstream_cx_http3_active|envoy_http_downstream_cx_http3_total|envoy_http_downstream_cx_idle_timeout|envoy_http_downstream_cx_length_ms_bucket|envoy_http_downstream_cx_length_ms_count|envoy_http_downstream_cx_length_ms_sum|envoy_http_downstream_cx_max_duration_reached|envoy_http_downstream_cx_max_requests_reached|envoy_http_downstream_cx_overload_disable_keepalive|envoy_http_downstream_cx_protocol_error|envoy_http_downstream_cx_rx_bytes_buffered|envoy_http_downstream_cx_rx_bytes_total|envoy_http_downstream_cx_ssl_active|envoy_http_downstream_cx_ssl_total|envoy_http_downstream_cx_total|envoy_http_downstream_cx_tx_bytes_buffered|envoy_http_downstream_cx_tx_bytes_total|envoy_http_downstream_cx_upgrades_active|envoy_http_downstream_cx_upgrades_total|envoy_http_downstream_flow_control_paused_reading_total|envoy_http_downstream_flow_control_resumed_reading_total|envoy_http_downstream_rq_active|envoy_http_downstream_rq_completed|envoy_http_downstream_rq_failed_path_normalization|envoy_http_downstream_rq_header_timeout|envoy_http_downstream_rq_http1_total|envoy_http_downstream_rq_http2_total|envoy_http_downstream_rq_http3_total|envoy_http_downstream_rq_idle_timeout|envoy_http_downstream_rq_max_duration_reached|envoy_http_downstream_rq_non_relative_path|envoy_http_downstream_rq_overload_close|envoy_http_downstream_rq_redirected_with_normalized_path|envoy_http_downstream_rq_rejected_via_ip_detection|envoy_http_downstream_rq_response_before_rq_complete|envoy_http_downstream_rq_time_bucket|envoy_http_downstream_rq_time_count|envoy_http_downstream_rq_time_sum|envoy_http_downstream_rq_timeout|envoy_http_downstream_rq_too_large|envoy_http_downstream_rq_total|envoy_http_downstream_rq_tx_reset|envoy_http_downstream_rq_ws_on_non_ws_route|envoy_http_downstream_rq_xx|envoy_http_no_cluster|envoy_http_no_route|envoy_http_passthrough_internal_redirect_bad_location|envoy_http_passthrough_internal_redirect_no_route|envoy_http_passthrough_internal_redirect_predicate|envoy_http_passthrough_internal_redirect_too_many_redirects|envoy_http_passthrough_internal_redirect_unsafe_scheme|envoy_http_rq_direct_response|envoy_http_rq_redirect|envoy_http_rq_reset_after_downstream_response_started|envoy_http_rq_total|envoy_http_rs_too_large|envoy_http_tracing_client_enabled|envoy_http_tracing_health_check|envoy_http_tracing_not_traceable|envoy_http_tracing_random_sampling|envoy_http_tracing_service_forced|envoy_listener_admin_downstream_cx_active|envoy_listener_admin_downstream_cx_destroy|envoy_listener_admin_downstream_cx_length_ms_bucket|envoy_listener_admin_downstream_cx_length_ms_count|envoy_listener_admin_downstream_cx_length_ms_sum|envoy_listener_admin_downstream_cx_overflow|envoy_listener_admin_downstream_cx_overload_reject|envoy_listener_admin_downstream_cx_total|envoy_listener_admin_downstream_cx_transport_socket_connect_timeout|envoy_listener_admin_downstream_global_cx_overflow|envoy_listener_admin_downstream_listener_filter_error|envoy_listener_admin_downstream_listener_filter_remote_close|envoy_listener_admin_downstream_pre_cx_active|envoy_listener_admin_downstream_pre_cx_timeout|envoy_listener_admin_http_downstream_rq_completed|envoy_listener_admin_http_downstream_rq_xx|envoy_listener_admin_main_thread_downstream_cx_active|envoy_listener_admin_main_thread_downstream_cx_total|envoy_listener_admin_no_filter_chain_match|envoy_listener_downstream_cx_active|envoy_listener_downstream_cx_destroy|envoy_listener_downstream_cx_length_ms_bucket|envoy_listener_downstream_cx_length_ms_count|envoy_listener_downstream_cx_length_ms_sum|envoy_listener_downstream_cx_overflow|envoy_listener_downstream_cx_overload_reject|envoy_listener_downstream_cx_total|envoy_listener_downstream_cx_transport_socket_connect_timeout|envoy_listener_downstream_global_cx_overflow|envoy_listener_downstream_listener_filter_error|envoy_listener_downstream_listener_filter_remote_close|envoy_listener_downstream_pre_cx_active|envoy_listener_downstream_pre_cx_timeout|envoy_listener_extension_config_missing|envoy_listener_http_downstream_rq_completed|envoy_listener_http_downstream_rq_xx|envoy_listener_manager_lds_init_fetch_timeout|envoy_listener_manager_lds_update_attempt|envoy_listener_manager_lds_update_duration_bucket|envoy_listener_manager_lds_update_duration_count|envoy_listener_manager_lds_update_duration_sum|envoy_listener_manager_lds_update_failure|envoy_listener_manager_lds_update_rejected|envoy_listener_manager_lds_update_success|envoy_listener_manager_lds_update_time|envoy_listener_manager_lds_version|envoy_listener_manager_lds_version_text|envoy_listener_manager_listener_added|envoy_listener_manager_listener_create_failure|envoy_listener_manager_listener_create_success|envoy_listener_manager_listener_in_place_updated|envoy_listener_manager_listener_modified|envoy_listener_manager_listener_removed|envoy_listener_manager_listener_stopped|envoy_listener_manager_total_filter_chains_draining|envoy_listener_manager_total_listeners_active|envoy_listener_manager_total_listeners_draining|envoy_listener_manager_total_listeners_warming|envoy_listener_manager_workers_started|envoy_listener_no_filter_chain_match|envoy_listener_server_ssl_socket_factory_downstream_context_secrets_not_ready|envoy_listener_server_ssl_socket_factory_ssl_context_update_by_sds|envoy_listener_server_ssl_socket_factory_upstream_context_secrets_not_ready|envoy_listener_ssl_connection_error|envoy_listener_ssl_fail_verify_cert_hash|envoy_listener_ssl_fail_verify_error|envoy_listener_ssl_fail_verify_no_cert|envoy_listener_ssl_fail_verify_san|envoy_listener_ssl_handshake|envoy_listener_ssl_no_certificate|envoy_listener_ssl_ocsp_staple_failed|envoy_listener_ssl_ocsp_staple_omitted|envoy_listener_ssl_ocsp_staple_requests|envoy_listener_ssl_ocsp_staple_responses|envoy_listener_ssl_session_reused|envoy_listener_udp_downstream_rx_datagram_dropped|envoy_main_thread_watchdog_mega_miss|envoy_main_thread_watchdog_miss|envoy_runtime_admin_overrides_active|envoy_runtime_deprecated_feature_seen_since_process_start|envoy_runtime_deprecated_feature_use|envoy_runtime_load_error|envoy_runtime_load_success|envoy_runtime_num_keys|envoy_runtime_num_layers|envoy_runtime_override_dir_exists|envoy_runtime_override_dir_not_exists|envoy_sds_identity_cert_secret_default_init_fetch_timeout|envoy_sds_identity_cert_secret_default_key_rotation_failed|envoy_sds_identity_cert_secret_default_update_attempt|envoy_sds_identity_cert_secret_default_update_duration_bucket|envoy_sds_identity_cert_secret_default_update_duration_count|envoy_sds_identity_cert_secret_default_update_duration_sum|envoy_sds_identity_cert_secret_default_update_failure|envoy_sds_identity_cert_secret_default_update_rejected|envoy_sds_identity_cert_secret_default_update_success|envoy_sds_identity_cert_secret_default_update_time|envoy_sds_identity_cert_secret_default_version|envoy_sds_identity_cert_secret_default_version_text|envoy_sds_mesh_ca_secret_default_init_fetch_timeout|envoy_sds_mesh_ca_secret_default_key_rotation_failed|envoy_sds_mesh_ca_secret_default_update_attempt|envoy_sds_mesh_ca_secret_default_update_duration_bucket|envoy_sds_mesh_ca_secret_default_update_duration_count|envoy_sds_mesh_ca_secret_default_update_duration_sum|envoy_sds_mesh_ca_secret_default_update_failure|envoy_sds_mesh_ca_secret_default_update_rejected|envoy_sds_mesh_ca_secret_default_update_success|envoy_sds_mesh_ca_secret_default_update_time|envoy_sds_mesh_ca_secret_default_version|envoy_sds_mesh_ca_secret_default_version_text|envoy_server_compilation_settings_fips_mode|envoy_server_concurrency|envoy_server_days_until_first_cert_expiring|envoy_server_debug_assertion_failures|envoy_server_dropped_stat_flushes|envoy_server_dynamic_unknown_fields|envoy_server_envoy_bug_failures|envoy_server_hot_restart_epoch|envoy_server_initialization_time_ms_bucket|envoy_server_initialization_time_ms_count|envoy_server_initialization_time_ms_sum|envoy_server_main_thread_watchdog_mega_miss|envoy_server_main_thread_watchdog_miss|envoy_server_memory_physical_size|envoy_server_parent_connections|envoy_server_seconds_until_first_ocsp_response_expiring|envoy_server_state|envoy_server_static_unknown_fields|envoy_server_stats_recent_lookups|envoy_server_total_connections|envoy_server_version|envoy_server_watchdog_mega_miss|envoy_server_watchdog_miss|envoy_server_wip_protos|envoy_tcp_downstream_cx_no_route|envoy_tcp_downstream_cx_rx_bytes_buffered|envoy_tcp_downstream_cx_rx_bytes_total|envoy_tcp_downstream_cx_total|envoy_tcp_downstream_cx_tx_bytes_buffered|envoy_tcp_downstream_cx_tx_bytes_total|envoy_tcp_downstream_flow_control_paused_reading_total|envoy_tcp_downstream_flow_control_resumed_reading_total|envoy_tcp_idle_timeout|envoy_tcp_max_downstream_connection_duration|envoy_tcp_upstream_flush_active|envoy_tcp_upstream_flush_total|envoy_tls_inspector_alpn_found|envoy_tls_inspector_alpn_not_found|envoy_tls_inspector_client_hello_too_large|envoy_tls_inspector_sni_found|envoy_tls_inspector_sni_not_found|envoy_tls_inspector_tls_found|envoy_tls_inspector_tls_not_found|envoy_tracing_zipkin_reports_dropped|envoy_tracing_zipkin_reports_failed|envoy_tracing_zipkin_reports_sent|envoy_tracing_zipkin_reports_skipped_no_cluster|envoy_tracing_zipkin_spans_sent|envoy_tracing_zipkin_timer_flushed|envoy_workers_watchdog_mega_miss|envoy_workers_watchdog_miss|go_gc_duration_seconds_count|go_info|go_memstats_alloc_bytes_total|go_memstats_frees_total|go_memstats_heap_objects|go_memstats_last_gc_time_seconds|go_memstats_lookups_total|go_memstats_mallocs_total|grpc_server_handling_seconds_bucket|grpc_server_handling_seconds_count|grpc_server_handling_seconds_sum|grpc_server_msg_received_total|grpc_server_msg_sent_total|mads_server_http_request_duration_seconds_bucket|mads_server_http_request_duration_seconds_count|mads_server_http_request_duration_seconds_sum|mads_server_http_requests_inflight|mads_server_http_response_size_bytes_bucket|mads_server_http_response_size_bytes_count|mads_server_http_response_size_bytes_sum|process_max_fds|process_open_fds|process_virtual_memory_bytes|process_virtual_memory_max_bytes|promhttp_metric_handler_requests_in_flight|promhttp_metric_handler_requests_total|scrape_samples_post_metric_relabeling|scrape_series_added|store_sum|xds_delivery_count|xds_delivery_sum|xds_generation_sum|envoy_listener_connections_accepted_per_socket_event_bucket|envoy_listener_connections_accepted_per_socket_event_count|envoy_listener_connections_accepted_per_socket_event_sum|controller_runtime_reconcile_time_seconds_bucket"
                action: "drop"
            scrape_configs:
            # Scrape config for kuma-control-plane
            - job_name: 'kuma-control-plane'
              scrape_interval: 1m
              scrape_timeout: 25s
              static_configs:
                - targets: ['kuma-control-plane.kuma-system.svc.cluster.local:5680']
            # Scrape config for kuma-dataplanes
            - job_name: 'kuma-dataplanes'
              scrape_interval: 1m
              relabel_configs:
              - source_labels: [__meta_kuma_mesh]
                regex: "(.*)"
                target_label: mesh
              - source_labels: [__meta_kuma_dataplane]
                regex: "(.*)"
                target_label: dataplane
              - source_labels: [__meta_kuma_service]
                regex: "(.*)"
                target_label: service
              - action: labelmap
                regex: __meta_kuma_label_(.+)
              kuma_sd_configs:
              - server: "http://kuma-control-plane.kuma-system.svc:5676"
            